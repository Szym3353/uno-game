//Cards
module.exports.cards = [
  {
    value: "+4",
    color: "black",
    special: true,
    description: "Następna osoba dobiera +4 karty. Wybierasz kolor",
  },
  {
    value: "+4",
    color: "black",
    special: true,
    description: "Następna osoba dobiera +4 karty. Wybierasz kolor",
  },
  {
    value: "+4",
    color: "black",
    special: true,
    description: "Następna osoba dobiera +4 karty. Wybierasz kolor",
  },
  {
    value: "+4",
    color: "black",
    special: true,
    description: "Następna osoba dobiera +4 karty. Wybierasz kolor",
  },
  {
    value: "color",
    color: "black",
    special: false,
    description: "Wybierz kolor który chcesz od następnej osoby",
  },
  {
    value: "color",
    color: "black",
    special: false,
    description: "Wybierz kolor który chcesz od następnej osoby",
  },
  {
    value: "color",
    color: "black",
    special: false,
    description: "Wybierz kolor który chcesz od następnej osoby",
  },
  {
    value: "color",
    color: "black",
    special: false,
    description: "Wybierz kolor który chcesz od następnej osoby",
  },
  {
    value: "+2",
    color: "green",
    special: true,
    description: "Następna osoba bierze 2 karty",
  },
  {
    value: "+2",
    color: "yellow",
    special: true,
    description: "Następna osoba bierze 2 karty",
  },
  {
    value: "+2",
    color: "blue",
    special: true,
    description: "Następna osoba bierze 2 karty",
  },
  {
    value: "+2",
    color: "red",
    special: true,
    description: "Następna osoba bierze 2 karty",
  },
  {
    value: "+2",
    color: "green",
    special: true,
    description: "Następna osoba bierze 2 karty",
  },
  {
    value: "+2",
    color: "yellow",
    special: true,
    description: "Następna osoba bierze 2 karty",
  },
  {
    value: "+2",
    color: "blue",
    special: true,
    description: "Następna osoba bierze 2 karty",
  },
  {
    value: "+2",
    color: "red",
    special: true,
    description: "Następna osoba bierze 2 karty",
  },
  {
    value: "stop",
    color: "green",
    special: true,
    description: "Stopuje kolejkę następnego gracza.",
  },
  {
    value: "stop",
    color: "red",
    special: true,
    description: "Stopuje kolejkę następnego gracza.",
  },
  {
    value: "stop",
    color: "blue",
    special: true,
    description: "Stopuje kolejkę następnego gracza.",
  },
  {
    value: "stop",
    color: "yellow",
    special: true,
    description: "Stopuje kolejkę następnego gracza.",
  },
  {
    value: "stop",
    color: "green",
    special: true,
    description: "Stopuje kolejkę następnego gracza.",
  },
  {
    value: "stop",
    color: "red",
    special: true,
    description: "Stopuje kolejkę następnego gracza.",
  },
  {
    value: "stop",
    color: "blue",
    special: true,
    description: "Stopuje kolejkę następnego gracza.",
  },
  {
    value: "stop",
    color: "yellow",
    special: true,
    description: "Stopuje kolejkę następnego gracza.",
  },
  {
    value: "rev",
    color: "green",
    special: true,
    description: "Zmienia kierunek kolejki",
  },
  {
    value: "rev",
    color: "red",
    special: true,
    description: "Zmienia kierunek kolejki",
  },
  {
    value: "rev",
    color: "yellow",
    special: true,
    description: "Zmienia kierunek kolejki",
  },
  {
    value: "rev",
    color: "blue",
    special: true,
    description: "Zmienia kierunek kolejki",
  },
  {
    value: "rev",
    color: "green",
    special: true,
    description: "Zmienia kierunek kolejki",
  },
  {
    value: "rev",
    color: "red",
    special: true,
    description: "Zmienia kierunek kolejki",
  },
  {
    value: "rev",
    color: "yellow",
    special: true,
    description: "Zmienia kierunek kolejki",
  },
  {
    value: "rev",
    color: "blue",
    special: true,
    description: "Zmienia kierunek kolejki",
  },
  {
    value: "1",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "2",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "3",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "4",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "5",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "6",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "7",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "8",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "9",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "1",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "2",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "3",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "4",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "5",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "6",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "7",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "8",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "9",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "1",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "2",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "3",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "4",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "5",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "6",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "7",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "8",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "9",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "1",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "2",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "3",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "4",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "5",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "6",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "7",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "8",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "9",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "1",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "2",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "3",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "4",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "5",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "6",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "7",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "8",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "9",
    color: "green",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "1",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "2",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "3",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "4",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "5",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "6",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "7",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "8",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "9",
    color: "red",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "1",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "2",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "3",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "4",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "5",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "6",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "7",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "8",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "9",
    color: "blue",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "1",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "2",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "3",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "4",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "5",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "6",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "7",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "8",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
  {
    value: "9",
    color: "yellow",
    special: false,
    description: "Zielona jedynka",
  },
];

module.exports.shuffle = (cards) => {
  let currentIndex = cards.length,
    randomIndex;

  while (currentIndex != 0) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    [cards[currentIndex], cards[randomIndex]] = [
      cards[randomIndex],
      cards[currentIndex],
    ];
  }

  return cards;
};

module.exports.getTurn = (game, userId) => {
  console.log("CHANGE TURN");
  let index = game.players.findIndex((el) => el.id === userId);

  let value = index;
  do {
    console.log(value);
    if (game.direction === 1 && value >= game.players.length - 1) {
      value = 0;
    } else if (game.direction === -1 && value === 0) {
      value = game.players.length - 1;
    } else {
      value += game.direction;
    }
    if (game.players[value].stopped > 0) game.players[value].stopped -= 1;
  } while (game.players[value].stopped > 0);

  console.log(value);
  return game.players[value].id;
};

module.exports.reShuffleCards = (game, number) => {
  if (game.spareCards.length < number) {
    if (game.centerCards.length > 1) {
      let newCards = this.shuffle(
        game.centerCards.slice(0, game.centerCards.length - 2)
      );
      game.centerCards.splice(0, game.centerCards.length - 1);
      game.spareCards = [...game.spareCards, ...newCards];
      game.spareCards = game.spareCards.map((el) => {
        if (el.value !== "color" && el.value !== "+4") {
          return el;
        } else {
          return { ...el, color: "black" };
        }
      });
      return game.spareCards;
    }
  }
  return game.spareCards;
};
